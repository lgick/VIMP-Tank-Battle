# Данные с сервера

Объект данных с сервера для создания кадра игры состоит из 3-х параметров:
* **constructors** - массив, содержащий имена конструкторов, для которых предназначены данные

```
['Tank', 'Radar']
```

* **instances** - объект, состоящий из имен экземпляров.
Имя экземпляра может быть как массивом, так и объектом (в зависимости от третьего параметра)

```
{bob: ..., jek: ...}
```

* **cache** - булево значение, означающее нужно кешировать или нет.
От этого значения зависит как будут парситься данные в **instances**
и сам синтаксис этих данных. 

1. Кэшируемые данные (`cache === true`)

Тип данных для долгоживущих, уникальных предметов игры. Например: отображение игрока. Игрок уникален (имеет один набор данных для создания) и постоянно отображается в игре. Тоже самое игрок на радаре.

Свойство **instances** при данном типе данных является объектом и содержит один набор данных.

``` js
instances: {
  bob: {
    layer: 1,
    team: 'team1',
    x: 200,
    y: 499,
    rotation: 180,
    gunRotation: 40
  }
}
```

Этот тип данных будет создаваться лишь один раз, а потом только изменяться.

2. Некэшируемые данные (`cache === false`)

Тип данных для маложивущих количественных предметов. Например: пули игрока отображаются в большом количестве на кадре игры. При том, что создать пулю легко и нет необходимости доставать ее из кэша.
Данные для таких экземпляров создаются заново каждый раз.

Свойство **instances** при данном типе данных является массивом из экземпляров:

``` js
instances: {
  bob: [
    {
      x: 300,
      y: 499,
    },
    {
      x: 700,
      y: 499,
    },
    {
      x: 200,
      y: 499,
    }
  ]
}
```

## Кэшируемые данные (пример):

``` js
var data = {
  constructors: ['Tank', 'Radar'],
  instances: {
    bob: {
      layer: 1,
      team: 'team1',
      x: 200,
      y: 499,
      rotation: 180,
      gunRotation: 40
    },
    jek: {
      layer: 1,
      team: 'team1',
      x: 200,
      y: 499,
      rotation: 180,
      gunRotation: 40
    }
  },
  cache: true
};
```

## Некэшируемые данные (пример):

``` js
var data = {
  constructors: ['Bullets'],
  instances: {
    bob: [
      {
        x: 200,
        y: 499
      },
      {
        x: 20,
        y: 99
      },
      {
        x: 240,
        y: 9
      },
      {
        x: 600,
        y: 899
      }
    ],
    jek: [
      {
        x: 400,
        y: 499
      },
      {
        x: 220,
        y: 199
      }
    ]
  },
  cache: false
};
```
